<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>生态环境检测系统</title>
    <!-- 自定义脚本 -->
    <script src=[[ url_for('static', filename="./js/vue.min.js" ) ]]></script>
    <script src=[[ url_for('static', filename="./js/jquery.js" ) ]]></script>
    <script src=[[ url_for('static', filename="./js/axios.min.js" ) ]]></script>
    <script src=[[ url_for('static', filename="./js/flexible.js" ) ]]></script>
    <script src=[[ url_for('static', filename="./js/echarts.min.js" ) ]]></script>
    <script src="https://cdn.bootcdn.net/ajax/libs/flv.js/1.6.2/flv.min.js"></script>

    <link rel="stylesheet" href=[[ url_for('static', filename="./css/index.css" ) ]] />

</head>


<body>

    <!-- 屏幕保护 -->
    <div class="protect1" id="protect1">
        <!-- <span id="greeting" class="flicker">不经一番寒彻骨</span> -->
    </div>
    <!-- 水质数据显示 -->
    <div class="protect2" id="protect2">
        <header>
            <h1>水环境在线监测</h1>
            <div class="showtime" id="water"></div>
        </header>
        <!-- 1.左边视图 -->
        <section class="mainbox" id=mainbox>
            <div class="column" id="sensor">
                <div class="column2" id="013">
                    <div class="MajorPollutant">
                        <div class="Pollutant line">
                            <div class="ChartAQI" id="AQI">

                            </div>
                            <div class="Pollutant-footer"></div>
                        </div>
                        <div class="Pollutant">
                            <div class="ChartAQI" id="MainPU">

                            </div>
                            <div class="Pollutant-footer"></div>
                        </div>
                    </div>
                </div>
                <div v-for="i in arr1" :id="gernerateId(i)" class="column1">
                    <div v-for="j in arr2" class="panel">
                        <h2 v-if="j*3+i == 0"> DO<span>（溶解氧）</span></h2>
                        <h2 v-else-if="j*3+i == 1">NH3-N<span>（氨氮）</span></h2>
                        <h2 v-else-if="j*3+i == 2"> PM2.5<span>（细颗粒物） </span></h2>
                        <h2 v-else-if="j*3+i == 3"> Cd<span>（镉离子）</span></h2>
                        <h2 v-else-if="j*3+i == 4"> Cyanos<span>（蓝绿藻）</span></h2>
                        <h2 v-else-if="j*3+i == 5"> PM10<span>（可吸入颗粒物） </span></h2>
                        <h2 v-else-if="j*3+i == 6"> EC<span>（电导率）</span></h2>
                        <h2 v-else-if="j*3+i == 7"> Cu<span>（铜离子）</span></h2>
                        <h2 v-else-if="j*3+i == 8"> CO<sub>2</sub><span>（二氧化碳） </span> </h2>
                        <h2 v-else-if="j*3+i == 9"> Chl<span>（叶绿素）</span> </h2>
                        <h2 v-else-if="j*3+i == 10"> 水温 </h2>
                        <h2 v-else-if="j*3+i == 11"> 水深</h2>
                        <!-- 测试调试部分-->
                        <!-- 溶解氧 -->
                        <div v-if="j*3+i==0" class="chart">
                            <h3 v-if="sensor_data[j*3 + i]>=6" style="color:rgba(0, 190, 0, 0.7)">
                                实际值：{{ sensor_data[j*3 + i] }}{{ unit[j*3 + i]
                                }}</h3>
                            <h3 v-else-if="sensor_data[j*3 + i]>=5 && sensor_data[j*3 + i]<=6"
                                style="color:rgba(255, 240, 0, 0.7)">实际值：{{ sensor_data[j*3 + i] }}{{ unit[j*3 + i]
                                }}</h3>
                            <h3 v-else-if="sensor_data[j*3 + i]>=3 && sensor_data[j*3 + i]<=5"
                                style="color:rgba(255, 130, 0, 0.7)">实际值：{{ sensor_data[j*3 + i] }}{{ unit[j*3 + i]
                                }}</h3>
                            <h3 v-else-if="sensor_data[j*3 + i]>=0 && sensor_data[j*3 + i]<=3"
                                style="color:rgba(255, 0, 0, 0.7)">实际值：{{ sensor_data[j*3 + i] }}{{ unit[j*3 + i]
                                }}</h3>
                            <h3 v-else>实际值：{{
                                sensor_data[j*3 + i] }}{{ unit[j*3 + i]
                                }}</h3>
                            <h4> 标准值：{{ std[j*3 + i] }}{{ unit[j*3 + i] }}</h4>
                        </div>
                        <!-- 氨氮 -->
                        <div v-if="j*3+i==1" class="chart">
                            <h3 v-if="sensor_data[j*3 + i]>=0 && sensor_data[j*3 + i]<1.5"
                                style="color:rgba(0, 190, 0, 0.7)">
                                实际值：{{ sensor_data[j*3 + i] }}{{ unit[j*3 + i]
                                }}</h3>
                            <h3 v-else-if="sensor_data[j*3 + i]>=1.5 && sensor_data[j*3 + i]<10000"
                                style="color:rgba(255, 0, 0, 0.7)">实际值：{{ sensor_data[j*3 + i] }}{{ unit[j*3 + i]
                                }}</h3>
                            <h3 v-else>实际值：{{
                                sensor_data[j*3 + i] }}{{ unit[j*3 + i]
                                }}</h3>
                            <h4> 标准值：{{ std[j*3 + i] }}{{ unit[j*3 + i] }}</h4>
                        </div>
                        <!-- PM2.5 -->
                        <div v-if="j*3+i==2" class="chart">
                            <h3 v-if="sensor_data[j*3 + i]>=0 && sensor_data[j*3 + i]<35"
                                style="color:rgba(0, 190, 0, 0.7)">
                                实际值：{{ sensor_data[j*3 + i] }}{{ unit[j*3 + i]
                                }}<sup>3</sup></h3>
                            <h3 v-else-if="sensor_data[j*3 + i]>=35 && sensor_data[j*3 + i]<75"
                                style="color:rgba(255, 240, 0, 0.7)">实际值：{{ sensor_data[j*3 + i] }}{{ unit[j*3 + i]
                                }}<sup>3</sup></h3>
                            <h3 v-else-if="sensor_data[j*3 + i]>=75 && sensor_data[j*3 + i]<115"
                                style="color:rgba(255, 130, 0, 0.7)">实际值：{{ sensor_data[j*3 + i] }}{{ unit[j*3 + i]
                                }}<sup>3</sup></h3>
                            <h3 v-else-if="sensor_data[j*3 + i]>=115 && sensor_data[j*3 + i]<150"
                                style="color:rgba(255, 0, 0, 0.7)">实际值：{{ sensor_data[j*3 + i] }}{{ unit[j*3 + i]
                                }}<sup>3</sup></h3>
                            <h3 v-else-if="sensor_data[j*3 + i]>=150 && sensor_data[j*3 + i]<250"
                                style="color:rgba(165, 15, 75, 0.7)">实际值：{{ sensor_data[j*3 + i] }}{{ unit[j*3 + i]
                                }}<sup>3</sup></h3>
                            <h3 v-else-if="sensor_data[j*3 + i]>=250 && sensor_data[j*3 + i]<500"
                                style="color:rgba(135, 15, 35, 0.7)">实际值：{{
                                sensor_data[j*3 + i] }}{{ unit[j*3 + i]
                                }}<sup>3</sup></h3>
                            <h3 v-else>实际值：{{
                                sensor_data[j*3 + i] }}{{ unit[j*3 + i]
                                }}<sup>3</sup></h3>
                            <h4> 标准值：{{ std[j*3 + i] }}{{ unit[j*3 + i] }}<sup>3</sup></h4>
                        </div>
                        <!-- 镉离子 -->
                        <div v-if="j*3+i==3" class="chart">
                            <h3 v-if="sensor_data[j*3 + i]>=0 && sensor_data[j*3 + i]<=10"
                                style="color:rgba(0, 190, 0, 0.7)">
                                实际值：{{ sensor_data[j*3 + i] }}{{ unit[j*3 + i]
                                }}</h3>
                            <h3 v-else-if="sensor_data[j*3 + i]>10 && sensor_data[j*3 + i]<100"
                                style="color:rgba(255, 0, 0, 0.7)">实际值：{{ sensor_data[j*3 + i] }}{{ unit[j*3 + i]
                                }}</h3>
                            <h3 v-else>实际值：{{
                                sensor_data[j*3 + i] }}{{ unit[j*3 + i]
                                }}</h3>
                            <h4> 标准值：{{ std[j*3 + i] }}{{ unit[j*3 + i] }}</h4>
                        </div>
                        <!-- 蓝绿藻 -->
                        <div v-if="j*3+i==4" class="chart">
                            <h3 v-if="sensor_data[j*3 + i]>=0 && sensor_data[j*3 + i]<16"
                                style="color:rgba(0, 190, 0, 0.7)">
                                实际值：{{ sensor_data[j*3 + i] }}{{ unit[j*3 + i]
                                }}</h3>
                            <h3 v-else-if="sensor_data[j*3 + i]>=16 && sensor_data[j*3 + i]<100"
                                style="color:rgba(255, 0, 0, 0.7)">实际值：{{ sensor_data[j*3 + i] }}{{ unit[j*3 + i]
                                }}</h3>
                            <h3 v-else>实际值：{{
                                sensor_data[j*3 + i] }}{{ unit[j*3 + i]
                                }}</h3>
                            <h4> 标准值：{{ std[j*3 + i] }}{{ unit[j*3 + i] }}</h4>
                        </div>
                        <!-- PM10 -->
                        <div v-if="j*3+i==5" class="chart">
                            <h3 v-if="sensor_data[j*3 + i]>=0 && sensor_data[j*3 + i]<50"
                                style="color:rgba(0, 190, 0, 0.7)">
                                实际值：{{ sensor_data[j*3 + i] }}{{ unit[j*3 + i]
                                }}<sup>3</sup></h3>
                            <h3 v-else-if="sensor_data[j*3 + i]>=50 && sensor_data[j*3 + i]<150"
                                style="color:rgba(255, 240, 0, 0.7)">实际值：{{ sensor_data[j*3 + i] }}{{ unit[j*3 + i]
                                }}<sup>3</sup></h3>
                            <h3 v-else-if="sensor_data[j*3 + i]>=150 && sensor_data[j*3 + i]<250"
                                style="color:rgba(255, 130, 0, 0.7)">实际值：{{ sensor_data[j*3 + i] }}{{ unit[j*3 + i]
                                }}<sup>3</sup></h3>
                            <h3 v-else-if="sensor_data[j*3 + i]>=250 && sensor_data[j*3 + i]<350"
                                style="color:rgba(255, 0, 0, 0.7)">实际值：{{ sensor_data[j*3 + i] }}{{ unit[j*3 + i]
                                }}<sup>3</sup></h3>
                            <h3 v-else-if="sensor_data[j*3 + i]>=350 && sensor_data[j*3 + i]<420"
                                style="color:rgba(165, 15, 75, 0.7)">实际值：{{ sensor_data[j*3 + i] }}{{ unit[j*3 + i]
                                }}<sup>3</sup></h3>
                            <h3 v-else-if="sensor_data[j*3 + i]>=420 && sensor_data[j*3+i]<600 "
                                style="color:rgba(135, 15, 35, 0.7)">实际值：{{
                                sensor_data[j*3 + i] }}{{ unit[j*3 + i]
                                }}<sup>3</sup></h3>
                            <h3 v-else>实际值：{{
                                sensor_data[j*3 + i] }}{{ unit[j*3 + i]
                                }}<sup>3</sup></h3>
                            <h4> 标准值：{{ std[j*3 + i] }}{{ unit[j*3 + i] }}<sup>3</sup></h4>
                        </div>
                        <!-- 电导率-->
                        <div v-if="j*3+i==6" class="chart">
                            <h3 v-if="sensor_data[j*3 + i]>=0 && sensor_data[j*3 + i]<500"
                                style="color:rgba(0, 190, 0, 0.7)">
                                实际值：{{ sensor_data[j*3 + i] }}{{ unit[j*3 + i]
                                }}</h3>
                            <h3 v-else-if="sensor_data[j*3 + i]>=500 && sensor_data[j*3 + i]<1500"
                                style="color:rgba(255, 0, 0, 0.7)">实际值：{{ sensor_data[j*3 + i] }}{{ unit[j*3 + i]
                                }}<sup>3</sup></h3>
                            <h3 v-else>实际值：{{
                                sensor_data[j*3 + i] }}{{ unit[j*3 + i]
                                }}</h3>
                            <h4> 标准值：{{ std[j*3 + i] }}{{ unit[j*3 + i] }}</h4>
                        </div>
                        <!-- 铜离子 -->
                        <div v-if="j*3+i==7" class="chart">
                            <h3 v-if="sensor_data[j*3 + i]>=0 && sensor_data[j*3 + i]<1000"
                                style="color:rgba(0, 190, 0, 0.7)">实际值：{{ sensor_data[j*3 + i] }}{{ unit[j*3 + i]
                                }}</h3>
                            <h3 v-else-if="sensor_data[j*3 + i]>=1000 && sensor_data[j*3 + i]<10000"
                                style="color:rgba(255, 0, 0, 0.7)">实际值：{{ sensor_data[j*3 + i] }}{{ unit[j*3 + i]
                                }}</h3>
                            <h3 v-else>实际值：{{
                                sensor_data[j*3 + i] }}{{ unit[j*3 + i]
                                }}</h3>
                            <h4> 标准值：{{ std[j*3 + i] }}{{ unit[j*3 + i] }}</h4>
                        </div>
                        <!-- CO2 -->
                        <div v-if="j*3+i==8" class="chart">
                            <h3 v-if="sensor_data[j*3 + i]>=0 && sensor_data[j*3 + i]<600"
                                style="color:rgba(0, 190, 0, 0.7)">实际值：{{ sensor_data[j*3 + i] }}{{ unit[j*3 + i]
                                }}</h3>
                            <h3 v-else-if="sensor_data[j*3 + i]>=600 && sensor_data[j*3 + i]<1000"
                                style="color:rgba(255, 240, 0, 0.7)">实际值：{{ sensor_data[j*3 + i] }}{{ unit[j*3 + i]
                                }}</h3>
                            <h3 v-else-if="sensor_data[j*3 + i]>=1000 && sensor_data[j*3 + i]<2000"
                                style="color:rgba(255, 130, 0, 0.7)">实际值：{{ sensor_data[j*3 + i] }}{{ unit[j*3 + i]
                                }}</h3>
                            <h3 v-else-if="sensor_data[j*3 + i]>=2000 && sensor_data[j*3 + i]<10000"
                                style="color:rgba(255, 0, 0, 0.7)">实际值：{{ sensor_data[j*3 + i] }}{{ unit[j*3 + i]
                                }}</h3>
                            <h3 v-else>实际值：{{
                                sensor_data[j*3 + i] }}{{ unit[j*3 + i]
                                }}</h3>
                            <h4> 标准值：{{ std[j*3 + i] }}{{ unit[j*3 + i] }}</h4>
                        </div>
                        <!-- 叶绿素 -->
                        <div v-if="j*3+i==9" class="chart">
                            <h3 v-if="sensor_data[j*3 + i]>=0 && sensor_data[j*3 + i]<50"
                                style="color:rgba(0, 190, 0, 0.7)">
                                实际值：{{ sensor_data[j*3 + i] }}{{ unit[j*3 + i]
                                }}</h3>
                            <h3 v-else-if="sensor_data[j*3 + i]>=50 && sensor_data[j*3 + i]<100"
                                style="color:rgba(255, 240, 0, 0.7)">实际值：{{ sensor_data[j*3 + i] }}{{ unit[j*3 + i]
                                }}</h3>
                            <h3 v-else-if="sensor_data[j*3 + i]>=100 && sensor_data[j*3 + i]<400"
                                style="color:rgba(255, 0, 0, 0.7)">实际值：{{ sensor_data[j*3 + i] }}{{ unit[j*3 + i]
                                }}</h3>
                            <h3 v-else>实际值：{{
                                sensor_data[j*3 + i] }}{{ unit[j*3 + i]
                                }}</h3>
                            <h4> 标准值：{{ std[j*3 + i] }}{{ unit[j*3 + i] }}</h4>
                        </div>
                        <!-- 水温 -->
                        <div v-if="j*3+i==10" class="chart">
                            <h3 v-if="sensor_data[j*3 + i]>=0 && sensor_data[j*3 + i]<25"
                                style="color:rgba(0, 190, 0, 0.7)">
                                实际值：{{ sensor_data[j*3 + i] }}{{ unit[j*3 + i]
                                }}</h3>
                            <h3 v-else-if="sensor_data[j*3 + i]>=25 && sensor_data[j*3 + i]<30"
                                style="color:rgba(255, 240, 0, 0.7)">实际值：{{ sensor_data[j*3 + i] }}{{ unit[j*3 + i]
                                }}</h3>
                            <h3 v-else-if="sensor_data[j*3 + i]>=30 && sensor_data[j*3 + i]<35"
                                style="color:rgba(255, 130, 0, 0.7)">实际值：{{ sensor_data[j*3 + i] }}{{ unit[j*3 + i]
                                }}</h3>
                            <h3 v-else-if="sensor_data[j*3 + i]>=35 && sensor_data[j*3 + i]<100"
                                style="color:rgba(255, 0, 0, 0.7)">实际值：{{ sensor_data[j*3 + i] }}{{ unit[j*3 + i]
                                }}</h3>
                            <h3 v-else>实际值：{{
                                sensor_data[j*3 + i] }}{{ unit[j*3 + i]
                                }}</h3>
                            <h4> 标准值：{{ std[j*3 + i] }}{{ unit[j*3 + i] }}</h4>
                        </div>
                        <!-- 水深 -->
                        <div v-if="j*3+i==11" class="chart">
                            <h3 v-if="sensor_data[j*3 + i]==-1" style="position:relative; top:20px;">
                                实际值：{{ sensor_data[j*3 + i] }}{{ unit[j*3 + i]
                                }}</h3>
                            <h3 v-else style="position:relative; top:20px;color:rgba(0, 190, 0, 0.7);">实际值：{{
                                sensor_data[j*3 + i] }}{{ unit[j*3 + i]
                                }}</h3>
                        </div>
                        <div class="panel-footer"></div>
                    </div>
                </div>
            </div>
            <!-- 2.右边视图 -->
            <div class="column">
                <!-- 评价模块 -->
                <div class="row">
                    <div class="pingjia">
                        <h1>三峡库区：云阳流域</h1>
                        <h1>测控范围：6532平方公里测控</h1>
                    </div>
                </div>
                <!-- tips模块 -->
                <div class="row">
                    <div class="tianqi">
                        <div class="tips">
                            <h2>监测说明:
                                <p> 本系统实现长江沿岸区域水质、气体到江岸环境信息的全方位实时采集、传输、存储和分析，以实现实时监管和问题预报预警、辅助决策，形成联动治水新格局。这对于长江流域的综合治理具有重要意义。
                                </p>
                            </h2>
                        </div>
                    </div>
                </div>
                <!-- 科普模块 -->
                <div class="row">
                    <!-- AQI指标 -->
                    <div class="kepu1" id="kepu1">
                    </div>
                </div>
        </section>
    </div>
    <!-- 屏幕保护大气 -->
    <div class="protect31" id="protect31">
        <!-- <span id="greeting" class="flicker">不经一番寒彻骨</span> -->
    </div>
    <!-- 大气数据显示 -->
    <div class="protect3" id="protect3">
        <header>
            <h1>大气环境在线监测</h1>
            <div class="showtime" id="air"></div>
        </header>
        <!-- 1.左边视图 -->
        <section class="mainbox" id=mainbox1>
            <div class="column" id="sensor">
                <div class="column2" id="012">
                    <div class="MajorPollutant">
                        <div class="Pollutant line">
                            <div class="ChartAQI" id="AQI">
                            </div>
                            <div class="Pollutant-footer"></div>
                        </div>
                        <div class="Pollutant">
                            <div class="ChartAQI" id="MainPU">
                            </div>
                            <div class="Pollutant-footer"></div>
                        </div>
                    </div>
                </div>
                <div v-for="i in arr11" key="gernerateId(i)" class="column1">
                    <div v-for="j in arr22" key="gernerateId(j)" class="panel">
                        <h2 v-if="j*3+i == 0"> PM1<span>（超细颗粒物）</span></h2>
                        <h2 v-else-if="j*3+i == 1">PM2.5<span>（细颗粒物）</span></h2>
                        <h2 v-else-if="j*3+i == 2"> PM10<span>（可吸入颗粒物） </span></h2>
                        <h2 v-else-if="j*3+i == 3">CO<sub>2</sub><span>（二氧化碳） </span> </h2>
                        <h2 v-else-if="j*3+i == 4">CO<span>（一氧化碳）</span></h2>
                        <h2 v-else-if="j*3+i == 5"> O<sub>3</sub><span>（臭氧） </span></h2>
                        <h2 v-else-if="j*3+i == 6"> SO<sub>2</sub><span>（二氧化硫）</span></h2>
                        <h2 v-else-if="j*3+i == 7"> NO<sub>2</sub><span>（二氧化氮）</span></h2>
                        <h2 v-else-if="j*3+i == 8"> 湿度</h2>
                        <h2 v-else-if="j*3+i == 9"> H<sub>2</sub>S<span>（硫化氢）</span></h2>
                        <h2 v-else-if="j*3+i == 10"> CH<sub>4</sub><span>（甲烷）</span></h2>
                        <h2 v-else-if="j*3+i == 11"> 温度</h2>
                        <!-- 测试调试部分-->
                        <!-- PM1 -->
                        <div v-if="j*3+i==0" class="chart">
                            <h3 v-if="sensor_data[j*3 + i]>=0 && sensor_data[j*3 + i]<25"
                                style="color:rgba(0, 190, 0, 0.7)">
                                实际值：{{ sensor_data[j*3 + i] }}{{ unit2[j*3 + i]
                                }}<sup>3</sup></h3>
                            <h3 v-else-if="sensor_data[j*3 + i]>=25 && sensor_data[j*3 + i]<1000"
                                style="color:rgba(255, 0, 0, 0.7)">实际值：{{ sensor_data[j*3 + i] }}{{ unit2[j*3 + i]
                                }}<sup>3</sup></h3>
                            <h3 v-else>实际值：{{
                                sensor_data[j*3 + i] }}{{ unit2[j*3 + i]
                                }}<sup>3</sup></h3>
                            <h4> 标准值：{{ std2[j*3 + i] }}{{ unit2[j*3 + i] }}<sup>3</sup></h4>
                        </div>
                        <!-- PM2.5 -->
                        <div v-if="j*3+i==1" class="chart">
                            <h3 v-if="sensor_data[j*3 + i]>=0 && sensor_data[j*3 + i]<35"
                                style="color:rgba(0, 190, 0, 0.7)">
                                实际值：{{ sensor_data[j*3 + i] }}{{ unit2[j*3 + i]
                                }}<sup>3</sup></h3>
                            <h3 v-else-if="sensor_data[j*3 + i]>=35 && sensor_data[j*3 + i]<75"
                                style="color:rgba(255, 240, 0, 0.7)">实际值：{{ sensor_data[j*3 + i] }}{{ unit2[j*3 + i]
                                }}<sup>3</sup></h3>
                            <h3 v-else-if="sensor_data[j*3 + i]>=75 && sensor_data[j*3 + i]<115"
                                style="color:rgba(255, 130, 0, 0.7)">实际值：{{ sensor_data[j*3 + i] }}{{ unit2[j*3 + i]
                                }}<sup>3</sup></h3>
                            <h3 v-else-if="sensor_data[j*3 + i]>=115 && sensor_data[j*3 + i]<150"
                                style="color:rgba(255, 0, 0, 0.7)">实际值：{{ sensor_data[j*3 + i] }}{{ unit2[j*3 + i]
                                }}<sup>3</sup></h3>
                            <h3 v-else-if="sensor_data[j*3 + i]>=150 && sensor_data[j*3 + i]<250"
                                style="color:rgba(165, 15, 75, 0.7)">实际值：{{ sensor_data[j*3 + i] }}{{ unit2[j*3 + i]
                                }}<sup>3</sup></h3>
                            <h3 v-else-if="sensor_data[j*3 + i]>=250 && sensor_data[j*3 + i]<500"
                                style="color:rgba(135, 15, 35, 0.7)">实际值：{{
                                sensor_data[j*3 + i] }}{{ unit2[j*3 + i]
                                }}<sup>3</sup></h3>
                            <h3 v-else>实际值：{{
                                sensor_data[j*3 + i] }}{{ unit2[j*3 + i]
                                }}<sup>3</sup></h3>
                            <h4> 标准值：{{ std2[j*3 + i] }}{{ unit2[j*3 + i] }}<sup>3</sup></h4>
                        </div>
                        <!-- PM10 -->
                        <div v-if="j*3+i==2" class="chart">
                            <h3 v-if="sensor_data[j*3 + i]>=0 && sensor_data[j*3 + i]<50"
                                style="color:rgba(0, 190, 0, 0.7)">
                                实际值：{{ sensor_data[j*3 + i] }}{{ unit2[j*3 + i]
                                }}<sup>3</sup></h3>
                            <h3 v-else-if="sensor_data[j*3 + i]>=50 && sensor_data[j*3 + i]<150"
                                style="color:rgba(255, 240, 0, 0.7)">实际值：{{ sensor_data[j*3 + i] }}{{ unit2[j*3 + i]
                                }}<sup>3</sup></h3>
                            <h3 v-else-if="sensor_data[j*3 + i]>=150 && sensor_data[j*3 + i]<250"
                                style="color:rgba(255, 130, 0, 0.7)">实际值：{{ sensor_data[j*3 + i] }}{{ unit2[j*3 + i]
                                }}<sup>3</sup></h3>
                            <h3 v-else-if="sensor_data[j*3 + i]>=250 && sensor_data[j*3 + i]<350"
                                style="color:rgba(255, 0, 0, 0.7)">实际值：{{ sensor_data[j*3 + i] }}{{ unit2[j*3 + i]
                                }}<sup>3</sup></h3>
                            <h3 v-else-if="sensor_data[j*3 + i]>=350 && sensor_data[j*3 + i]<420"
                                style="color:rgba(165, 15, 75, 0.7)">实际值：{{ sensor_data[j*3 + i] }}{{ unit2[j*3 + i]
                                }}<sup>3</sup></h3>
                            <h3 v-else-if="sensor_data[j*3 + i]>=420 && sensor_data[j*3+i]<600 "
                                style="color:rgba(135, 15, 35, 0.7)">实际值：{{
                                sensor_data[j*3 + i] }}{{ unit2[j*3 + i]
                                }}<sup>3</sup></h3>
                            <h3 v-else>实际值：{{
                                sensor_data[j*3 + i] }}{{ unit2[j*3 + i]
                                }}<sup>3</sup></h3>
                            <h4> 标准值：{{ std2[j*3 + i] }}{{ unit2[j*3 + i] }}<sup>3</sup></h4>
                        </div>
                        <!-- CO2 -->
                        <div v-if="j*3+i==3" class="chart">
                            <h3 v-if="sensor_data[j*3 + i]>=0 && sensor_data[j*3 + i]<600"
                                style="color:rgba(0, 190, 0, 0.7)">实际值：{{ sensor_data[j*3 + i] }}{{ unit2[j*3 + i]
                                }}</h3>
                            <h3 v-else-if="sensor_data[j*3 + i]>=600 && sensor_data[j*3 + i]<1000"
                                style="color:rgba(255, 240, 0, 0.7)">实际值：{{ sensor_data[j*3 + i] }}{{ unit2[j*3 + i]
                                }}</h3>
                            <h3 v-else-if="sensor_data[j*3 + i]>=1000 && sensor_data[j*3 + i]<2000"
                                style="color:rgba(255, 130, 0, 0.7)">实际值：{{ sensor_data[j*3 + i] }}{{ unit2[j*3 + i]
                                }}</h3>
                            <h3 v-else-if="sensor_data[j*3 + i]>=2000 && sensor_data[j*3 + i]<10000"
                                style="color:rgba(255, 0, 0, 0.7)">实际值：{{ sensor_data[j*3 + i] }}{{ unit2[j*3 + i]
                                }}</h3>
                            <h3 v-else>实际值：{{
                                sensor_data[j*3 + i] }}{{ unit2[j*3 + i]
                                }}</h3>
                            <h4> 标准值：{{ std2[j*3 + i] }}{{ unit2[j*3 + i] }}</h4>
                        </div>
                        <!-- CO -->
                        <div v-if="j*3+i==4" class="chart">
                            <h3 v-if="sensor_data[j*3 + i]>=0 && sensor_data[j*3 + i]<2"
                                style="color:rgba(0, 190, 0, 0.7)">
                                实际值：{{ sensor_data[j*3 + i] }}{{ unit2[j*3 + i]
                                }}<sup>3</sup></h3>
                            <h3 v-else-if="sensor_data[j*3 + i]>=2 && sensor_data[j*3 + i]<4"
                                style="color:rgba(255, 240, 0, 0.7)">实际值：{{ sensor_data[j*3 + i] }}{{ unit2[j*3 + i]
                                }}<sup>3</sup></h3>
                            <h3 v-else-if="sensor_data[j*3 + i]>=4 && sensor_data[j*3 + i]<14"
                                style="color:rgba(255, 130, 0, 0.7)">实际值：{{ sensor_data[j*3 + i] }}{{ unit2[j*3 + i]
                                }}<sup>3</sup></h3>
                            <h3 v-else-if="sensor_data[j*3 + i]>=14 && sensor_data[j*3 + i]<24"
                                style="color:rgba(255, 0, 0, 0.7)">实际值：{{ sensor_data[j*3 + i] }}{{ unit2[j*3 + i]
                                }}<sup>3</sup></h3>
                            <h3 v-else-if="sensor_data[j*3 + i]>=24 && sensor_data[j*3 + i]<36"
                                style="color:rgba(165, 15, 75, 0.7)">实际值：{{ sensor_data[j*3 + i] }}{{ unit2[j*3 + i]
                                }}<sup>3</sup></h3>
                            <h3 v-else-if="sensor_data[j*3 + i]>=36 && sensor_data[j*3+i]<48"
                                style="color:rgba(135, 15, 35, 0.7)">实际值：{{
                                sensor_data[j*3 + i] }}{{ unit2[j*3 + i]
                                }}<sup>3</sup></h3>
                            <h3 v-else>实际值：{{
                                sensor_data[j*3 + i] }}{{ unit2[j*3 + i]
                                }}<sup>3</sup></h3>
                            <h4> 标准值：{{ std2[j*3 + i] }}{{ unit2[j*3 + i] }}<sup>3</sup></h4>
                        </div>
                        <!-- O3 -->
                        <div v-if="j*3+i==5" class="chart">
                            <h3 v-if="sensor_data[j*3 + i]>=0 && sensor_data[j*3 + i]<160"
                                style="color:rgba(0, 190, 0, 0.7)">实际值：{{ sensor_data[j*3 + i] }}{{ unit2[j*3 + i]
                                }}<sup>3</sup></h3>
                            <h3 v-else-if="sensor_data[j*3 + i]>=160 && sensor_data[j*3 + i]<200"
                                style="color:rgba(255, 240, 0, 0.7)">实际值：{{ sensor_data[j*3 + i] }}{{ unit2[j*3 + i]
                                }}<sup>3</sup></h3>
                            <h3 v-else-if="sensor_data[j*3 + i]>=200 && sensor_data[j*3 + i]<300"
                                style="color:rgba(255, 130, 0, 0.7)">实际值：{{ sensor_data[j*3 + i] }}{{ unit2[j*3 + i]
                                }}<sup>3</sup></h3>
                            <h3 v-else-if="sensor_data[j*3 + i]>=300 && sensor_data[j*3 + i]<400"
                                style="color:rgba(255, 0, 0, 0.7)">实际值：{{ sensor_data[j*3 + i] }}{{ unit2[j*3 + i]
                                }}<sup>3</sup></h3>
                            <h3 v-else-if="sensor_data[j*3 + i]>=400 && sensor_data[j*3 + i]<800"
                                style="color:rgba(165, 15, 75, 0.7)">实际值：{{ sensor_data[j*3 + i] }}{{ unit2[j*3 + i]
                                }}<sup>3</sup></h3>
                            <h3 v-else-if="sensor_data[j*3 + i]>=800 && sensor_data[j*3 + i]<1200 "
                                style="color:rgba(135, 15, 35, 0.7)">实际值：{{
                                sensor_data[j*3 + i] }}{{ unit2[j*3 + i]
                                }}<sup>3</sup></h3>
                            <h3 v-else>实际值：{{
                                sensor_data[j*3 + i] }}{{ unit2[j*3 + i]
                                }}<sup>3</sup></h3>
                            <h4> 标准值：{{ std2[j*3 + i] }}{{ unit2[j*3 + i] }}<sup>3</sup></h4>
                        </div>
                        <!-- SO2 -->
                        <div v-if="j*3+i==6" class="chart">
                            <h3 v-if="sensor_data[j*3 + i]>=0 && sensor_data[j*3 + i]<50"
                                style="color:rgba(0, 190, 0, 0.7)">实际值：{{ sensor_data[j*3 + i] }}{{ unit2[j*3 + i]
                                }}<sup>3</sup></h3>
                            <h3 v-else-if="sensor_data[j*3 + i]>=50 && sensor_data[j*3 + i]<150"
                                style="color:rgba(255, 240, 0, 0.7)">实际值：{{ sensor_data[j*3 + i] }}{{ unit2[j*3 + i]
                                }}<sup>3</sup></h3>
                            <h3 v-else-if="sensor_data[j*3 + i]>=150 && sensor_data[j*3 + i]<475"
                                style="color:rgba(255, 130, 0, 0.7)">实际值：{{ sensor_data[j*3 + i] }}{{ unit2[j*3 + i]
                                }}<sup>3</sup></h3>
                            <h3 v-else-if="sensor_data[j*3 + i]>=475 && sensor_data[j*3 + i]<800"
                                style="color:rgba(255, 0, 0, 0.7)">实际值：{{ sensor_data[j*3 + i] }}{{ unit2[j*3 + i]
                                }}<sup>3</sup></h3>
                            <h3 v-else-if="sensor_data[j*3 + i]>=800 && sensor_data[j*3 + i]<1600"
                                style="color:rgba(165, 15, 75, 0.7)">实际值：{{ sensor_data[j*3 + i] }}{{ unit2[j*3 + i]
                                }}<sup>3</sup></h3>
                            <h3 v-else-if="sensor_data[j*3 + i]>=1600 && sensor_data[j*3+i]<2620 "
                                style="color:rgba(135, 15, 35, 0.7)">实际值：{{
                                sensor_data[j*3 + i] }}{{ unit2[j*3 + i]
                                }}<sup>3</sup></h3>
                            <h3 v-else>实际值：{{
                                sensor_data[j*3 + i] }}{{ unit2[j*3 + i]
                                }}<sup>3</sup></h3>
                            <h4> 标准值：{{ std2[j*3 + i] }}{{ unit2[j*3 + i] }}<sup>3</sup></h4>
                        </div>
                        <!-- NO2 -->
                        <div v-if="j*3+i==7" class="chart">
                            <h3 v-if="sensor_data[j*3 + i]>=0 && sensor_data[j*3 + i]<40"
                                style="color:rgba(0, 190, 0, 0.7)">实际值：{{ sensor_data[j*3 + i] }}{{ unit2[j*3 + i]
                                }}<sup>3</sup></h3>
                            <h3 v-else-if="sensor_data[j*3 + i]>=40 && sensor_data[j*3 + i]<80"
                                style="color:rgba(255, 240, 0, 0.7)">实际值：{{ sensor_data[j*3 + i] }}{{ unit2[j*3 + i]
                                }}<sup>3</sup></h3>
                            <h3 v-else-if="sensor_data[j*3 + i]>=80 && sensor_data[j*3 + i]<180"
                                style="color:rgba(255, 130, 0, 0.7)">实际值：{{ sensor_data[j*3 + i] }}{{ unit2[j*3 + i]
                                }}<sup>3</sup></h3>
                            <h3 v-else-if="sensor_data[j*3 + i]>=180 && sensor_data[j*3 + i]<280"
                                style="color:rgba(255, 0, 0, 0.7)">实际值：{{ sensor_data[j*3 + i] }}{{ unit2[j*3 + i]
                                }}<sup>3</sup></h3>
                            <h3 v-else-if="sensor_data[j*3 + i]>=280 && sensor_data[j*3 + i]<565"
                                style="color:rgba(165, 15, 75, 0.7)">实际值：{{ sensor_data[j*3 + i] }}{{ unit2[j*3 + i]
                                }}<sup>3</sup></h3>
                            <h3 v-else-if="sensor_data[j*3 + i]>=565 && sensor_data[j*3 + i]<940 "
                                style="color:rgba(135, 15, 35, 0.7)">实际值：{{
                                sensor_data[j*3 + i] }}{{ unit2[j*3 + i]
                                }}<sup>3</sup></h3>
                            <h3 v-else>实际值：{{
                                sensor_data[j*3 + i] }}{{ unit2[j*3 + i]
                                }}<sup>3</sup></h3>
                            <h4> 标准值：{{ std2[j*3 + i] }}{{ unit2[j*3 + i] }}<sup>3</sup></h4>
                        </div>
                        <!-- 湿度 -->
                        <div v-if="j*3+i==8" class="chart">

                            
                            <h3> 实际值：{{ sensor_data[j*3 + i] }}{{ unit2[j*3 + i] }}</h3>
                            <h4> 标准值：{{ std2[j*3 + i] }}{{ unit2[j*3 + i] }}</h4>
                        </div>
                        <!-- H2S -->
                        <div v-if="j*3+i==9" class="chart">
                            <h3 v-if="sensor_data[j*3 + i]>=0 && sensor_data[j*3 + i]<10"
                                style="color:rgba(0, 190, 0, 0.7)">实际值：{{ sensor_data[j*3 + i] }}{{ unit2[j*3 + i]
                                }}</h3>
                            <h3 v-else-if="sensor_data[j*3 + i]>=10 && sensor_data[j*3 + i]<10000"
                                style="color:rgba(255, 0, 0, 0.7)">实际值：{{ sensor_data[j*3 + i] }}{{ unit2[j*3 + i]
                                }}</h3>
                            <h3 v-else>实际值：{{
                                sensor_data[j*3 + i] }}{{ unit2[j*3 + i]
                                }}</h3>
                            <h4> 标准值：{{ std2[j*3 + i] }}{{ unit2[j*3 + i] }}</h4>
                        </div>
                        <!-- CH4 -->
                        <div v-if="j*3+i==10" class="chart">
                            <h3 v-if="sensor_data[j*3 + i]>=0 && sensor_data[j*3 + i]<12500"
                                style="color:rgba(0, 190, 0, 0.7)">
                                实际值：{{ sensor_data[j*3 + i] }}{{ unit2[j*3 + i]
                                }}</h3>
                            <h3 v-else-if="sensor_data[j*3 + i]>=12500 && sensor_data[j*3 + i]<25000 "
                                style="color:rgba(135, 15, 35, 0.7)">实际值：{{
                                sensor_data[j*3 + i] }}{{ unit2[j*3 + i]
                                }}</h3>
                            <h3 v-else> 实际值：{{ sensor_data[j*3 + i] }}{{ unit2[j*3 + i] }}</h3>
                            <h4> 标准值：{{ std2[j*3 + i] }}{{ unit2[j*3 + i] }}</h4>
                        </div>
                        <!-- 温度 -->
                        <div v-if="j*3+i==11" class="chart">
                            <h3> 实际值：{{ sensor_data[j*3 + i] }}{{ unit2[j*3 + i] }}</h3>
                            <h4> 标准值：{{ std2[j*3 + i] }}{{ unit2[j*3 + i] }}</h4>
                        </div>
                        <div class="panel-footer"></div>
                    </div>
                </div>
            </div>
            <!-- 2.右边视图 -->
            <div class="column">
                <!-- 评价模块 -->
                <div class="row">
                    <div class="pingjia">
                        <h1>测控地点：重庆南山片区</h1>
                        <h1>测控范围：68万平方米测控</h1>
                    </div>
                </div>
                <!-- tips模块 -->
                <div class="row">
                    <div class="tianqi">
                        <div class="tips">
                            <h2>监测说明:
                                <p> 本系统是一个综合的环境监测系统，旨在实时采集、传输、存储和分析重庆南山区域的大气环境数据。该系统通过在重庆南山地区部署传感器和监测设备，能够全面监测该地区的大气污染情况。采集到的数据被传输到中央服务器进行存储和分析，以便实现实时监管，并提供问题预报预警和辅助决策的支持。
                                </p>
                            </h2>
                        </div>
                    </div>
                </div>
                <!-- 科普模块 -->
                <div class="row">
                    <!-- AQI指标 -->
                    <div class="kepu1" id="kepu1">
                    </div>
                </div>
        </section>
    </div>
    <!-- 推流视频显示 -->
    <div class="protect4" id="protect4">
        <header>
            <h1>数景水生态测控船</h1>
            <div class="showtime" id="boat"></div>
        </header>
        <div class="video-container">
            <div class="video-item">
                <video id="myVideo1" muted autoplay controls="controls"></video>
                <div class="video-label">船上摄像头1（船头中）</div>
            </div>
            <!--<div class="video-item">-->
            <!--    <video id="myVideo2" muted autoplay controls="controls"></video>-->
            <!--    <div class="video-label">船上摄像头2（船尾）</div>-->
            <!--</div>-->
            <div class="video-item">
                <video id="myVideo2" muted autoplay controls="controls"></video>
                <div class="video-label">船上摄像头2</div>
                <div id="replacementImageContainer">
                    <img id="replacementImage" src="/static/images/鱼探仪图像说明(3).png" alt="Replacement Image">
                </div>
            </div>

            <script>
                var videoDom1;
                var player1;
                var video_id_1 = 'myVideo1';
                var lastDecodedFrames_1 = 1;
                var video_name_1 = 'http://120.78.234.51:8080/live/34020000001320000002.flv';

                var videoDom2;
                var player2;
                var video_id_2 = 'myVideo2';
                var lastDecodedFrames_2 = 2;
                var video_name_2 = 'http://tstit.x3322.net:8081/live/livestream.flv';

                // var videoDom3;
                // var player3;
                // var video_id_3 = 'myVideo3';
                // var lastDecodedFrames_3 = 3;
                // var video_name_3 = 'http://120.78.234.51:8080/live/34020000001320000001.flv';

                // var videoDom4;
                // var player4;
                // var video_id_4 = 'myVideo4';
                // var lastDecodedFrames_4 = 4;
                // var video_name_4 = 'http://120.78.234.51:8080/live/34020000001320000001.flv';


                function listenVideo(videoDom, player, video_name, url_name, lastDecodedFrames) {
                    player.on(flvjs.Events.ERROR,
                        (errorType, errorDetail, errorInfo) => {
                            // console.log("errorType" + errorType);
                            // console.log("errorDetail" + errorDetail);
                            // console.log("errorInfo" + errorInfo);
                            console.log("error");

                            // 视频出错后销毁重建
                            video_close(player);
                            setTimeout(function () { video_start(videoDom, player, video_name, url_name, lastDecodedFrames) }, 240000);
                        });

                    //视频断流

                    player.on("statistics_info", function (res) {

                        if (player.buffered && player.buffered.length) {
                            let end = player.buffered.end(0);
                            let diff = end - player.currentTime;

                            if (diff > 60) {
                                console.log("reboot:" + diff + "\tid:" + lastDecodedFrames);
                                video_close(player);
                                video_start(videoDom, player, video_name, url_name, lastDecodedFrames);
                            }
                        }

                        /*
                        if(lastDecodedFrames === 0){
                            lastDecodedFrames = res.decodedFrames;
                            return
                        }
                        if(lastDecodedFrames != res.decodedFrames){
                            lastDecodedFrames = res.decodedFrames;
                        }else{
                            lastDecodedFrames = 0;
                            video_close(player);
                            video_start(videoDom, player, video_name, url_name,lastDecodedFrames);
                        }*/
                    });


                }

                function video_start(videoDom, player, video_name, url_name, lastDecodedFrames) {
                    videoDom = document.getElementById(video_name);
                    player = flvjs.createPlayer({
                        type: 'flv', // 媒体类型，默认是 flv,
                        isLive: true, // 是否是直播流
                        url: url_name, // 流地址
                    }, {
                        // 其他的配置项可以根据项目实际情况参考 api 去配置
                        autoCleanupMinBackwardDuration: true, // 清除缓存 对 SourceBuffer 进行自动清理
                        enableWorker: false, //不启用分离线程
                        enableStashBuffer: true, //关闭IO隐藏缓冲区
                        isLive: true,
                        lazyLoad: false,
                    })
                    player.attachMediaElement(videoDom);
                    try {
                        player.load();
                        // player.play();
                        listenVideo(videoDom, player, video_name, url_name, lastDecodedFrames);
                    } catch (error) {
                        console.log("wait。。。");
                    }

                    /*                    
                                        let timer = setInterval(()=>{
                                            if(player.buffered && player.buffered.length){
                                                let end = player.buffered.end(0);
                                                let diff = end - player.currentTime;
                                                console.log(diff);
                                                if(diff > 30){
                                                    console.log("reboot");
                                                    clearInterval(timer);
                                                    video_close(player);
                                                    video_start(videoDom, player, video_name, url_name,lastDecodedFrames);
                                                }
                                            }
                                        }, 2000);
                      */

                }
                function video_close(player) {
                    player.pause();
                    player.unload();
                    player.detachMediaElement();
                    player.destroy();
                    player = null;
                }

                if (flvjs.isSupported()) {

                    video_start(videoDom1, player1, video_id_1, video_name_1, lastDecodedFrames_1);
                    video_start(videoDom2, player2, video_id_2, video_name_2, lastDecodedFrames_2);

                } else {
                    console.log("no isSupported");
                }

                document.addEventListener('keydown', function (event) {
                    if (event.key === '9') {
                        var videoElement = document.getElementById('myVideo2');
                        var imageContainer = document.getElementById('replacementImageContainer');

                        if (imageContainer.style.display === 'none') {
                            // 显示图片，隐藏视频
                            videoElement.style.display = 'none';
                            imageContainer.style.display = 'block';
                        } else {
                            // 显示视频，隐藏图片
                            videoElement.style.display = 'block';
                            imageContainer.style.display = 'none';
                        }
                    }
                });

            </script>
        </div>
    </div>


    <!-- 水质数据获取部分 -->
    <script>
        var vm = new Vue({
            el: "#mainbox",
            data: {
                arr1: [0, 1, 2],
                arr2: [0, 1, 2, 3],
                arr11: [0, 1, 2],
                arr22: [0, 1, 2, 3],
                arr3: [0, 1, 2, 3, 4, 5],
                arr4: [0, 1, 2, 3, 4],
                title_aqi: ["优", "良", "轻度污染", "中度污染", "重度污染", "严重污染"],
                title: ["pm2.5", 'pm10', 'SO2', 'CO', 'NO2', "O3", "O2", "CO2", "CH4", "H2S", "湿度", "温度"],
                std: [">6", "<0.5", "<75", "<10", "<16", "<150", "<1000", "<1000", "<1000", "<100", "常温25", "<25"],
                unit: ["mg/L", "mg/L", "μg/m", "μg/L", "万cells/mL", "μg/m", "μS/cm", "μg/L", "ppm", "μg/L", "°C", "m"],
                sensor_data: [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1],
                main_data: ["优", "", "", "", ""],
                dict: {
                    'co': "主要污染物（一氧化碳）",
                    'o3': "主要污染物（臭氧）",
                    'so2': "主要污染物（二氧化硫）",
                    'no2': "主要污染物（二氧化氮）",
                    'pm10': "主要污染物（可吸入颗粒物）",
                    'pm25': "主要污染物（细颗粒物）",
                },
            },
            methods: {
                InitHtml: function () {
                    data_json = {};
                    data_json['flag'] = '0';
                    axios.post("/update",
                        data_json).then(function (response) {
                            //console.log(response.data)
                            //that.StartTask("0", response.data);
                        }).catch(function (err) {
                            // alert("请求失败");
                            console.log(err);
                        });
                },
                GetJson: function (flag) {  // 0表示初始化，1表示传感器数据，2表示主界面数据，3表示AQI可视化，4表示主要污染物
                    let that = this;
                    data_json = {};
                    // console.log(this);
                    data_json['flag'] = flag;
                    axios.post("/update",
                        data_json).then(function (response) {
                            //console.log(response.data);
                            that.StartTask(flag, response.data);

                        }).catch(function (err) {
                            // alert("请求失败");
                            console.log(err);
                        });
                },
                StartTask: function (flag, data) {

                    if (flag == "1") {
                        this.UpdateSensor(data);
                    } else if (flag == "2") {
                        this.UpdateMainBlock(data);
                    } else if (flag == "3") {
                        this.UpdateVisAQI(data);
                    } else if (flag == "4") {
                        this.UpdateVispull(data);
                    } else if (flag == "0") {
                        this.InitTasks(data);
                    }
                },
                InitTasks: function (data) {  //初始化所有的任务
                    //console.log(data.sensor);
                    //data.sensor[6] = 20.9;
                    this.sensor_data = data.sensor;
                    // this.main_data = data.main;
                },
                UpdateSensor: function (data) {  //更新传感器
                    this.sensor_data = data;
                },
                UpdateMainBlock: function (data) {  //更新主界面
                    this.main_data = data;
                },
                gernerateId: function (index) {
                    return index;
                },
                test: function () {
                    console.log(this);
                }
            }
        })


        vm.InitHtml();
        window.setInterval(vm.GetJson, 5000, "0");  //传感器5s更新一次


    </script>
    <!-- 大气数据获取部分 -->
    <script>
        var vm = new Vue({
            el: "#mainbox1",
            data: {
                arr1: [0, 1, 2],
                arr2: [0, 1, 2, 3],
                arr11: [0, 1, 2],
                arr22: [0, 1, 2, 3],
                arr3: [0, 1, 2, 3, 4, 5],
                arr4: [0, 1, 2, 3, 4],
                title_aqi: ["优", "良", "轻度污染", "中度污染", "重度污染", "严重污染"],
                title: ["pm2.5", 'pm10', 'SO2', 'CO', 'NO2', "O3", "O2", "CO2", "CH4", "H2S", "湿度", "温度"],
                std2: ["<25", "<75", "<150", "<1000", "<4", "<200", "<150", "<80", "<70", "<10", "<12500", "常温25"],
                unit2: ["μg/m", "μg/m", "μg/m", "ppm", "mg/m", "μg/m", "ug/m", "ug/m", "RH", "ppm", "ppm", "°C"],
                sensor_data: [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1],
                main_data: ["优", "", "", "", ""],
                dict: {
                    'co': "主要污染物（一氧化碳）",
                    'o3': "主要污染物（臭氧）",
                    'so2': "主要污染物（二氧化硫）",
                    'no2': "主要污染物（二氧化氮）",
                    'pm10': "主要污染物（可吸入颗粒物）",
                    'pm25': "主要污染物（细颗粒物）",
                },
            },
            methods: {
                InitHtml: function () {
                    data_json = {};
                    data_json['flag'] = '0';
                    axios.post("/update",
                        data_json).then(function (response) {
                            //console.log(response.data)
                            //that.StartTask("0", response.data);
                        }).catch(function (err) {
                            // alert("请求失败");
                            console.log(err);
                        });
                },
                GetJson: function (flag) {  // 0表示初始化，1表示传感器数据，2表示主界面数据，3表示AQI可视化，4表示主要污染物
                    let that = this;
                    data_json = {};
                    // console.log(this);
                    data_json['flag'] = flag;
                    axios.post("/update",
                        data_json).then(function (response) {
                            //console.log(response.data);
                            that.StartTask(flag, response.data);

                        }).catch(function (err) {
                            // alert("请求失败");
                            console.log(err);
                        });
                },
                StartTask: function (flag, data) {

                    if (flag == "1") {
                        this.UpdateSensor(data);
                    } else if (flag == "2") {
                        this.UpdateMainBlock(data);
                    } else if (flag == "3") {
                        this.UpdateVisAQI(data);
                    } else if (flag == "4") {
                        this.UpdateVispull(data);
                    } else if (flag == "0") {
                        this.InitTasks(data);
                    }
                },
                InitTasks: function (data) {  //初始化所有的任务
                    //console.log(data.sensor);
                    //data.sensor[6] = 20.9;
                    this.sensor_data = data.sensor2;
                    // this.main_data = data.main;
                },
                UpdateSensor: function (data) {  //更新传感器
                    this.sensor_data = data;
                },
                UpdateMainBlock: function (data) {  //更新主界面
                    this.main_data = data;
                },
                gernerateId: function (index) {
                    return index;
                },
                test: function () {
                    console.log(this);
                }
            }
        })


        vm.InitHtml();
        window.setInterval(vm.GetJson, 5000, "0");  //传感器5s更新一次


    </script>

    <script src=[[ url_for('static', filename="./js/index.js" ) ]]></script>

</body>




</html>